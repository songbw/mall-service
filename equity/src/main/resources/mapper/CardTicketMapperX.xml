<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fengchao.equity.mapper.CardTicketMapperX">

    <insert id="inserBatch" parameterType="java.util.List" >
    insert into card_ticket (card_id, card,
    password, remark,corporation_code,welfare_order_no,card_info_code) values
    <foreach collection="list" item="item" index="index" separator=",">
        (
        #{item.cardId,jdbcType=INTEGER},
        #{item.card,jdbcType=VARCHAR},
        #{item.password,jdbcType=VARCHAR},
        #{item.remark,jdbcType=VARCHAR},
        #{item.corporationCode,jdbcType=VARCHAR},
        #{item.welfareOrderNo,jdbcType=VARCHAR},
        #{item.cardInfoCode,jdbcType=VARCHAR}
        )
    </foreach>
    </insert>
    <insert id="activatesCardTicket" parameterType="java.util.List" >
        <foreach collection="list" item="item" index="index" separator=";">
        update card_ticket
        set status = 2,
            activate_time = current_timestamp,
            end_time = #{item.endTime,jdbcType=TIMESTAMP}
        where
            card = #{item.card,jdbcType=VARCHAR}
            and status = 1
        </foreach>
    </insert>
    <insert id="batchInsertActiveTickets" parameterType="java.util.List" >
        insert into card_ticket (status,activate_time,end_time,card_id, card,
        password, remark,corporation_code,welfare_order_no,card_info_code) values
        <foreach collection="list" item="item" index="index" separator=",">
            (
            2,
            current_timestamp,
            #{item.endTime,jdbcType=TIMESTAMP},
            #{item.cardId,jdbcType=INTEGER},
            #{item.card,jdbcType=VARCHAR},
            #{item.password,jdbcType=VARCHAR},
            #{item.remark,jdbcType=VARCHAR},
            #{item.corporationCode,jdbcType=VARCHAR},
            #{item.welfareOrderNo,jdbcType=VARCHAR},
            #{item.cardInfoCode,jdbcType=VARCHAR}
            )
        </foreach>
    </insert>
</mapper>
